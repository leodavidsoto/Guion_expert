<!-- Insertar esto en la secci√≥n de manualControls -->
<div id="manualControls" class="hidden" style="margin-top: 15px;">
    <label>üì∫ Formato</label>
    <select id="formatoSelect" style="font-size: 0.9em;">
        <option value="">ü§ñ Auto-detecci√≥n</option>
        
        <optgroup label="üì± Vertical Social (9:16)">
            <option value="YOUTUBE_SHORT">YouTube Short (15-60s)</option>
            <option value="REEL_INSTAGRAM">Instagram Reel (15-90s)</option>
            <option value="TIKTOK">TikTok (15-180s)</option>
            <option value="STORY">Story IG/FB (15s)</option>
            <option value="SNAPCHAT">Snapchat Spotlight (60s)</option>
            <option value="YOUTUBE_VERTICAL">YouTube Vertical (3-10 min)</option>
        </optgroup>
        
        <optgroup label="üì∫ Horizontal Social">
            <option value="YOUTUBE_VIDEO">Video YouTube (8-15 min)</option>
            <option value="FACEBOOK_VIDEO">Video Facebook (1-3 min)</option>
            <option value="LINKEDIN_VIDEO">Video LinkedIn (30-90s)</option>
            <option value="TWITTER_VIDEO">Video Twitter/X (45s)</option>
        </optgroup>
        
        <optgroup label="üé¨ Cine y Streaming">
            <option value="CORTO">Cortometraje (10-30 min)</option>
            <option value="MEDIO">Mediometraje (30-60 min)</option>
            <option value="LARGO">Largometraje (90-120 min)</option>
            <option value="LARGO_EXTENDIDO">Largo Extendido (120-180 min)</option>
            <option value="SERIE_STREAMING">Episodio Serie (45-60 min)</option>
            <option value="MINISERIE">Episodio Miniserie (30-45 min)</option>
            <option value="DOCUSERIE">Episodio Docuserie (40-60 min)</option>
        </optgroup>
        
        <optgroup label="üéµ Musical y Entretenimiento">
            <option value="VIDEOCLIP">Videoclip Musical (3-5 min)</option>
        </optgroup>
        
        <optgroup label="üìö Educativo">
            <option value="TUTORIAL">Tutorial (3-10 min)</option>
            <option value="EXPLAINER">Video Explainer (1-3 min)</option>
            <option value="CURSO_MODULO">M√≥dulo Curso (15-30 min)</option>
            <option value="MASTERCLASS">Masterclass (45-90 min)</option>
            <option value="WEBINAR">Webinar (30-60 min)</option>
        </optgroup>
        
        <optgroup label="üíº Comercial y Corporativo">
            <option value="AD_SPOT_15">Spot 15 segundos</option>
            <option value="AD_SPOT_30">Spot 30 segundos</option>
            <option value="AD_SPOT_60">Spot 60 segundos</option>
            <option value="BRANDED_CONTENT">Branded Content (2-5 min)</option>
            <option value="VIDEO_CORPORATIVO">Video Corporativo (2-4 min)</option>
        </optgroup>
        
        <optgroup label="üé® Experimental">
            <option value="MICRO_FICTION">Microficci√≥n (60-90s)</option>
            <option value="POEMA_VISUAL">Poema Visual (2-4 min)</option>
            <option value="LOOP">Loop Infinito (10-30s)</option>
        </optgroup>
    </select>
    
    <label style="margin-top: 15px;">üìñ Estructura Narrativa</label>
    <select id="estructuraSelect" style="font-size: 0.9em;">
        <option value="">ü§ñ Auto-detecci√≥n</option>
        
        <optgroup label="üé¨ Hollywood Cl√°sico">
            <option value="SAVE_THE_CAT">Save The Cat - 15 Beats (Blake Snyder)</option>
            <option value="THREE_ACT">Three Act Structure (Syd Field)</option>
            <option value="FOUR_ACT">Four Act Structure (TV/Streaming)</option>
            <option value="FIVE_ACT">Five Act Structure (Shakespeare)</option>
            <option value="SEVEN_POINT">Seven Point Story (Dan Wells)</option>
        </optgroup>
        
        <optgroup label="üóø Viaje M√≠tico">
            <option value="HERO_JOURNEY">Hero's Journey - 12 Etapas (Campbell)</option>
            <option value="VIRGIN_PROMISE">The Virgin's Promise (Kim Hudson)</option>
            <option value="WRITERS_JOURNEY">Writer's Journey (Vogler)</option>
        </optgroup>
        
        <optgroup label="üì∫ TV y Series">
            <option value="STORY_CIRCLE">Story Circle - 8 Pasos (Dan Harmon)</option>
            <option value="TEASER_4_ACT">Teaser + 4 Actos (TV Drama)</option>
            <option value="COLD_OPEN_STRUCTURE">Cold Open + 3 Actos (Sitcom)</option>
        </optgroup>
        
        <optgroup label="üîÄ No Lineal">
            <option value="IN_MEDIA_RES">In Media Res (Flashbacks)</option>
            <option value="FRACTURED_NARRATIVE">Narrativa Fracturada (Pulp Fiction)</option>
            <option value="RASHOMON">Estructura Rashomon (Multi-perspectiva)</option>
            <option value="REVERSE_CHRONOLOGY">Cronolog√≠a Inversa (Memento)</option>
        </optgroup>
        
        <optgroup label="üåè Internacional">
            <option value="KISHOTENKETSU">Kish≈çtenketsu - 4 Actos (Jap√≥n)</option>
            <option value="BOLLYWOOD_MASALA">Masala (Bollywood)</option>
        </optgroup>
        
        <optgroup label="üß™ Experimental">
            <option value="FICHTEAN_CURVE">Curva Fichtean (Crisis m√∫ltiples)</option>
            <option value="W_PLOT">W Plot (Romance)</option>
            <option value="NESTED_LOOPS">C√≠rculos Conc√©ntricos</option>
            <option value="VIGNETTE_ANTHOLOGY">Antolog√≠a de Vi√±etas</option>
        </optgroup>
        
        <optgroup label="‚ö° Formato Corto">
            <option value="SIMPLE">Estructura Simple (Shorts/Reels)</option>
            <option value="PROBLEMA_SOLUCION">Problema-Soluci√≥n (Ads)</option>
            <option value="ANTES_DESPUES">Antes/Despu√©s (Transformaci√≥n)</option>
        </optgroup>
        
        <optgroup label="üé• Documental">
            <option value="EXPOSITORY">Expositivo (Educativo)</option>
            <option value="OBSERVATIONAL">Observacional (Cin√©ma V√©rit√©)</option>
            <option value="PERSONAL_ESSAY">Ensayo Personal (Reflexivo)</option>
        </optgroup>
    </select>
    
    <div id="estructuraInfo" style="margin-top: 10px; padding: 10px; background: #f0f0f0; border-radius: 6px; font-size: 0.85em; display: none;">
        <strong id="estructuraInfoTitle"></strong>
        <p id="estructuraInfoDesc" style="margin: 5px 0 0 0; color: #666;"></p>
    </div>
</div>

<script>
// Agregar este script para mostrar info de estructura
document.getElementById('estructuraSelect').addEventListener('change', async function() {
    const value = this.value;
    const infoDiv = document.getElementById('estructuraInfo');
    
    if (!value) {
        infoDiv.style.display = 'none';
        return;
    }
    
    // Fetch estructura info
    const response = await fetch('/api/structures');
    const structures = await response.json();
    
    // Buscar en todas las categor√≠as
    let found = null;
    for (let category in structures) {
        if (structures[category][value]) {
            found = structures[category][value];
            break;
        }
    }
    
    if (found) {
        document.getElementById('estructuraInfoTitle').textContent = found.name;
        document.getElementById('estructuraInfoDesc').textContent = 
            `${found.description} ‚Ä¢ ${found.beats} beats ‚Ä¢ ${found.duration} ‚Ä¢ ${found.best_for}`;
        infoDiv.style.display = 'block';
    } else {
        infoDiv.style.display = 'none';
    }
});
</script>
